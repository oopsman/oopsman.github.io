<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="webpack是一款模块加载器兼打包工具，它能把各种资源，例如JS(含JSX)、coffee、样式(含less/sass)、图片等都作为模块来使用和处理。官方介绍：A bundler for javascript and friends. Packs many modules into a few bundled assets. Code Splitting allows to load part">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack">
<meta property="og:url" content="http://oopsman.github.io/2017/06/23/webpack/index.html">
<meta property="og:site_name" content="照见自在">
<meta property="og:description" content="webpack是一款模块加载器兼打包工具，它能把各种资源，例如JS(含JSX)、coffee、样式(含less/sass)、图片等都作为模块来使用和处理。官方介绍：A bundler for javascript and friends. Packs many modules into a few bundled assets. Code Splitting allows to load part">
<meta property="og:updated_time" content="2017-07-12T10:32:29.123Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="webpack">
<meta name="twitter:description" content="webpack是一款模块加载器兼打包工具，它能把各种资源，例如JS(含JSX)、coffee、样式(含less/sass)、图片等都作为模块来使用和处理。官方介绍：A bundler for javascript and friends. Packs many modules into a few bundled assets. Code Splitting allows to load part">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> webpack | 照见自在 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">照见自在</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">From 0 To 1</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                webpack
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-23T14:59:34+08:00" content="2017-06-23">
              2017-06-23
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>webpack是一款模块加载器兼打包工具，它能把各种资源，例如JS(含JSX)、coffee、样式(含less/sass)、图片等都作为模块来使用和处理。官方介绍：A bundler for javascript and friends. Packs many modules into a few bundled assets. Code Splitting allows to load parts for the application on demand. Through “loaders” modules can be CommonJs, AMD, ES6 modules, CSS, Images, JSON, Coffeescript, LESS, … and your custom stuff.<br><a id="more"></a></p>
<ul>
<li>webpack is a bundler for modules. <font color="red">The main purpose is to bundle JavaScript files for usage in a browser, </font>yet it is also capable of transforming, bundling, or packaging just about any resource or asset.</li>
<li>Performance：webpack uses async I/O and has multiple caching levels. This makes webpack fast and incredibly fast on incremental compilations.</li>
<li>Code Splitting：webpack allows you to split your codebase into multiple chunks. Chunks are loaded asynchronously at runtime. This reduces the initial loading time.</li>
<li>术语“transpile”(此处我们翻译成“转码”)。这个单词是转换(transform)和编译(compile)的混搭。</li>
<li>Tree shaking 是一个术语，通常用来描述移除 JavaScript 上下文中无用代码这个过程，或者更准确的说是按需引用代码，它依赖于 ES2015 模块系统中 import/export 的静态结构特性。</li>
<li>Hot Module Replacement(热模块替换)。这是一个接口(module.hot.accept)，它允许在运行时更新各种模块，而无需进行完全刷新。模块热替换(HMR - Hot Module Replacement)功能会在应用程序运行过程中替换、添加或删除模块，而无需重新加载整个页面。</li>
<li>虽然在大多数浏览器中都不支持import和export语句，但是webpack却能够提供支持。事实上，webpack在幕后会将代码“转译”，以便旧有浏览器可以执行。如果你检查dist/bundle.js，你可以看到webpack具体如何实现，这是独创精巧的设计！</li>
<li>注意，<font color="red">webpack不会更改代码中除import和export语句以外的部分。</font>如果你在使用其它ES2015特性，请确保你使用了一个像是Babel的转译器。</li>
<li>通过声明模块所需的依赖，webpack 能够利用这些信息去构建依赖图表，<font color="red">然后使用图表生成一个优化过的，会以正确顺序执行的 bundle。</font></li>
<li>webpack只有单一的入口，其它的模块需要通过import、require、url等导入相关位置。</li>
<li>Webpack会分析入口文件，解析包含依赖关系的各个文件。这些文件(模块)都打包到bundle.js。Webpack会给每个模块分配一个唯一的id并通过这个id索引和访问模块。在页面启动时，会先执行entry.js中的代码，其它模块会在运行require的时候再执行。</li>
<li><p>webpack有一个智能解析器，几乎可以处理任何第三方库，无论它们的模块形式是CommonJS、AMD还是普通的JS文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">/******/ (function(modules) &#123; // webpackBootstrap</span><br><span class="line">/******/ 	// The module cache</span><br><span class="line">/******/ 	var installedModules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 	// The require function</span><br><span class="line">/******/ 	function __webpack_require__(moduleId) &#123;</span><br><span class="line"></span><br><span class="line">/******/ 		// Check if module is in cache</span><br><span class="line">/******/ 		if(installedModules[moduleId])</span><br><span class="line">/******/ 			return installedModules[moduleId].exports;</span><br><span class="line"></span><br><span class="line">/******/ 		// Create a new module (and put it into the cache)</span><br><span class="line">/******/ 		var module = installedModules[moduleId] = &#123;</span><br><span class="line">/******/ 			exports: &#123;&#125;,</span><br><span class="line">/******/ 			id: moduleId,</span><br><span class="line">/******/ 			loaded: false</span><br><span class="line">/******/ 		&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 		// Execute the module function</span><br><span class="line">/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);</span><br><span class="line"></span><br><span class="line">/******/ 		// Flag the module as loaded</span><br><span class="line">/******/ 		module.loaded = true;</span><br><span class="line"></span><br><span class="line">/******/ 		// Return the exports of the module</span><br><span class="line">/******/ 		return module.exports;</span><br><span class="line">/******/ 	&#125;</span><br><span class="line"></span><br><span class="line">/******/ 	// expose the modules object (__webpack_modules__)</span><br><span class="line">/******/ 	__webpack_require__.m = modules;</span><br><span class="line"></span><br><span class="line">/******/ 	// expose the module cache</span><br><span class="line">/******/ 	__webpack_require__.c = installedModules;</span><br><span class="line"></span><br><span class="line">/******/ 	// __webpack_public_path__</span><br><span class="line">/******/ 	__webpack_require__.p = "";</span><br><span class="line"></span><br><span class="line">/******/ 	// Load entry module and return exports</span><br><span class="line">/******/ 	return __webpack_require__(0);</span><br><span class="line">/******/ &#125;)</span><br><span class="line">/************************************************************************/</span><br><span class="line">/******/ ([</span><br><span class="line">/* 0 */</span><br><span class="line">/***/ function(module, exports, __webpack_require__) &#123;</span><br><span class="line"></span><br><span class="line">	document.write(__webpack_require__(1));</span><br><span class="line"></span><br><span class="line">/***/ &#125;,</span><br><span class="line">/* 1 */</span><br><span class="line">/***/ function(module, exports) &#123;</span><br><span class="line"></span><br><span class="line">	moudle.exports = " it works from content.js";</span><br><span class="line"></span><br><span class="line">/***/ &#125;</span><br><span class="line">/******/ ]);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Webpack本身只能处理JavaScript模块，如果要处理其他类型的文件，就需要使用loader进行转换。</p>
</li>
<li>Loader可以理解为是模块和资源的转换器，它本身是一个函数，接受源文件作为参数，返回转换的结果。这样，我们就可以通过require来加载任何类型的模块或文件，比如CoffeeScript、JSX、LESS或图片。<br>Loader特性：Loader可以通过管道方式链式调用，每个loader可以把资源转换成任意格式并传递给下一个loader，<font color="red">但是最后一个loader必须返回JavaScript。</font>Loader运行在node.js环境中，所以可以做任何可能的事情。<font color="red">多个loader可以用在同一个文件上并且被链式调用。链式调用时从右到左执行且loader之间用“!”来分割。</font> </li>
<li>我们要在页面中引入一个CSS文件style.css，首页将style.css也看成是一个模块，然后用css-loader来读取它，再用style-loader把它插入到页面中。eg：require(“!style!css!./style.css”);  //载入 style.css  document.write(require(“./content.js”));</li>
<li>如果每次require CSS文件的时候都要写loader前缀，是一件很繁琐的事情。我们可以根据模块类型(扩展名)来自动绑定需要的loader这样写require(“./style.css”)。命令就是：webpack ./entry.js bundle.js –module-bind “css=style!css”。</li>
<li>加载图片：一个url-loader来说，它会<font color="red">将样式中引用到的图片</font>转为模块来处理。</li>
<li>Webpack在执行的时候，除了在命令行传入参数，还可以通过指定的配置文件来执行。默认情况下，会搜索当前目录的webpack.config.js文件，这个文件是一个node.js模块，返回一个json格式的配置信息对象，或者通过–config选项来指定配置文件。    </li>
<li>Webpack配置项说明：<br>  entry：指定打包的入口文件，每有一个键值对，就是一个入口文件<br>  output：配置打包结果，path定义了输出的文件夹，filename则定义了打包结果文件的名称<br>  module：定义了对模块的处理逻辑，这里可以用loaders定义了一系列的加载器，以及一些正则。当需要加载的文件匹配test的正则时，就会调用后面的loader对文件进行处理，这正是webpack强大的原因。</li>
<li>插件可以完成更多loader不能完成的功能。插件的使用一般是在webpack的配置信息plugins选项中指定。Webpack本身内置了一些常用的插件，还可以通过npm安装第三方插件。</li>
<li>要使用某个插件，我们需要通过npm安装它，然后要做的就是在webpack配置中的plugins关键字部分添加该插件的一个实例（plugins是一个数组）。</li>
<li><p>expose-loader——-require(‘expose?$!jquery’)：把$作为别名为jquery的变量暴露到全局上下文中。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/* 1 */</span><br><span class="line">/***/ function(module, exports, __webpack_require__) &#123;</span><br><span class="line"></span><br><span class="line">	/* WEBPACK VAR INJECTION */(function(global) &#123;module.exports = global["$"] = __webpack_require__(2);</span><br><span class="line">	/* WEBPACK VAR INJECTION */&#125;.call(exports, (function() &#123; return this; &#125;())))</span><br><span class="line"></span><br><span class="line">/***/ &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>TinyPNG — How does it work? This technique is called “quantization”. By reducing the number of colors, 24-bit PNG files can be converted to much smaller 8-bit indexed color images. All unnecessary metadata is stripped too. The result: better PNG files with 100% support for transparency. </p>
</li>
<li><font color="red">检查字符看是相等实际却不等的情况，encodeURIComponent(‘ dev ‘)的结果”%20dev%20”，一般是出现不可见字符空格导致。</font></li>
<li>Multiple entry files are allowed. It is useful for a multi-page app. <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// main1.js</span><br><span class="line">document.write('<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>');</span><br><span class="line">// main2.js</span><br><span class="line">document.write('<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello Webpack<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>');</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    bundle1: './main1.js',</span><br><span class="line">    bundle2: './main2.js'</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: '[name].js'</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>webpack –display-error-details//带上参数可以找出详细的错误信息</li>
<li>由于 loader 仅在每个文件的基础上执行转换，而 插件(plugins) 更常用于（但不限于）在打包模块的 “compilation” 和 “chunk” 生命周期执行操作和自定义功能。插件目的在于解决 loader 无法实现的其他事。</li>
<li>The Manifest：Let’s step back for a second now and ask a more high-level question – how do these plugins know what files are being spit out? The answer is in the manifest webpack keeps to track how all your modules map to the output bundles. If you’re interested in managing webpack’s output in other ways, the manifest would be a good place to start.This data can be extracted into a json file for easy consumption using the WebpackManifestPlugin or ChunkManifestPlugin.</li>
<li><p>你可能会感兴趣，webpack及其插件似乎“知道”应该哪些文件生成。答案是，通过manifest，webpack能够对「你的模块映射到输出bundle的过程」保持追踪。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	   "bundle1.js": "bundle1-cc551b2f.js",</span><br><span class="line">   "bundle2.js": "bundle2-cc6224e7.js",</span><br><span class="line">   "init.[chunkhash:8].js.js": "init.405189cd.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在运行 webpack 时设置环境变量，并且使用 Node.js 的 process.env 来引用变量。NODE_ENV 变量通常被视为事实标准。使用 cross-env 包来跨平台设置(cross-platform-set)环境变量。</p>
</li>
<li>CSS 会跟你的 JavaScript 打包在一起，并且在初始加载后，通过一个 <style> 标签注入样式，然后作用于页面。这里有一个缺点就是，你无法使用浏览器的能力，去异步且并行去加载 CSS。取而代之的是，你的页面需要等待整个 JavaScript 文件加载完，才能进行样式渲染。webpack 能够用 ExtractTextWebpackPlugin 帮助你将 CSS 单独打包，以解决以上问题。</li>
<li><font color="red">启动webpack-dev-server后，在目标文件夹中是看不到编译后的文件的,实时编译后的文件都保存到了内存当中。</font>因此很多同学使用webpack-dev-server进行开发的时候都看不到编译后的文件。</li>
<li>在webpack中实现HMR也很简单，只需要做两项配置：1、在webpack配置文件中添加HMR插件；2、在Webpack Dev Server中添加“hot”参数；</li>
<li>webpack可以把一个哈希值添加到打包的文件名中，添加特殊的字符串混合体([name], [id] and [hash])到输出文件名前。</li>
<li>打包后的文件有时候你是不容易找到出错了的地方对应的源代码的位置的，Source Maps就是来帮我们解决这个问题的。</li>
<li>定义环境变量NODE_ENV=production：在环境变量 NODE_ENV 等于 production 的时候UglifyJs会认为if语句里的是死代码在压缩代码时删掉。</li>
<li>CommonsChunkPlugin可以提取出多个代码块都依赖的模块形成一个单独的模块。要发挥CommonsChunkPlugin的作用还需要浏览器缓存机制的配合。在应用有多个页面的场景下提取出所有页面公共的代码减少单个页面的代码，在不同页面之间切换时所有页面公共的代码之前被加载过而不必重新加载。这个方法可以非常有效的提升应用性能。</li>
<li>分析输出结果：webpack –json –profile &gt; stats.json。这代表让webpack把构建结果以json输出并带上构建性能信息。会生产一个stats.json文件，再打开webpack analyze 上传这个文件开始分析。 webpack analyze：<a href="https://webpack.github.io/analyse/">https://webpack.github.io/analyse/</a></li>
<li>“path”仅仅告诉Webpack结果存储在哪里，然而“publicPath”项则被许多Webpack的插件用于在生产模式下更新内嵌到css、html文件里的url值。</li>
<li>webpack在构建时，会静态解析(statically parse)代码中的require.ensure()。在其中任何被引用的依赖模块，或在回调函数中被require()的模块，都将被分离到一个新的chunk中。这个新的chunk会被生成为异步的bundle，由webpack通过jsonp来按需加载。</li>
<li>运行webpack -p (也可以运行 webpack –optimize-minimize –define process.env.NODE_ENV=”production”，他们是等效的)。它会执行如下步骤：1、使用UglifyJsPlugin进行JS文件压缩。 2、设置NodeJS环境变量，触发某些package包，以不同的方式进行编译。DefinePlugin在原始的源码中执行查找和替换操作，在导入的代码中，任何出现process.env.NODE_ENV的地方都会被替换为”production”。因此，形如if (process.env.NODE_ENV !== ‘production’) console.log(‘…’)的代码就会等价于if (false) console.log(‘…’)并且最终通过UglifyJS等价替换掉。<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">// 按需加载 require.ensure</span><br><span class="line">require.ensure(['./a'], function(require) &#123;</span><br><span class="line">  var content = require('./a');</span><br><span class="line">  // todo</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//打包后  bundle.js</span><br><span class="line">/******/ (function(modules) &#123; // webpackBootstrap</span><br><span class="line">/******/ 	// install a JSONP callback for chunk loading</span><br><span class="line">/******/ 	var parentJsonpFunction = window["webpackJsonp"];</span><br><span class="line">/******/ 	window["webpackJsonp"] = function webpackJsonpCallback(chunkIds, moreModules) &#123;</span><br><span class="line">/******/ 		// add "moreModules" to the modules object,</span><br><span class="line">/******/ 		// then flag all "chunkIds" as loaded and fire callback</span><br><span class="line">/******/ 		var moduleId, chunkId, i = 0, callbacks = [];</span><br><span class="line">/******/ 		for(;i &lt; chunkIds.length; i++) &#123;</span><br><span class="line">/******/ 			chunkId = chunkIds[i];</span><br><span class="line">/******/ 			if(installedChunks[chunkId])</span><br><span class="line">/******/ 				callbacks.push.apply(callbacks, installedChunks[chunkId]);</span><br><span class="line">/******/ 			installedChunks[chunkId] = 0;</span><br><span class="line">/******/ 		&#125;</span><br><span class="line">/******/ 		for(moduleId in moreModules) &#123;</span><br><span class="line">/******/ 			modules[moduleId] = moreModules[moduleId];</span><br><span class="line">/******/ 		&#125;</span><br><span class="line">/******/ 		if(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);</span><br><span class="line">/******/ 		while(callbacks.length)</span><br><span class="line">/******/ 			callbacks.shift().call(null, __webpack_require__);</span><br><span class="line"></span><br><span class="line">/******/ 	&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 	// The module cache</span><br><span class="line">/******/ 	var installedModules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 	// object to store loaded and loading chunks</span><br><span class="line">/******/ 	// "0" means "already loaded"</span><br><span class="line">/******/ 	// Array means "loading", array contains callbacks</span><br><span class="line">/******/ 	var installedChunks = &#123;</span><br><span class="line">/******/ 		0:0</span><br><span class="line">/******/ 	&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 	// The require function</span><br><span class="line">/******/ 	function __webpack_require__(moduleId) &#123;</span><br><span class="line"></span><br><span class="line">/******/ 		// Check if module is in cache</span><br><span class="line">/******/ 		if(installedModules[moduleId])</span><br><span class="line">/******/ 			return installedModules[moduleId].exports;</span><br><span class="line"></span><br><span class="line">/******/ 		// Create a new module (and put it into the cache)</span><br><span class="line">/******/ 		var module = installedModules[moduleId] = &#123;</span><br><span class="line">/******/ 			exports: &#123;&#125;,</span><br><span class="line">/******/ 			id: moduleId,</span><br><span class="line">/******/ 			loaded: false</span><br><span class="line">/******/ 		&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 		// Execute the module function</span><br><span class="line">/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);</span><br><span class="line"></span><br><span class="line">/******/ 		// Flag the module as loaded</span><br><span class="line">/******/ 		module.loaded = true;</span><br><span class="line"></span><br><span class="line">/******/ 		// Return the exports of the module</span><br><span class="line">/******/ 		return module.exports;</span><br><span class="line">/******/ 	&#125;</span><br><span class="line"></span><br><span class="line">/******/ 	// This file contains only the entry chunk.</span><br><span class="line">/******/ 	// The chunk loading function for additional chunks</span><br><span class="line">/******/ 	__webpack_require__.e = function requireEnsure(chunkId, callback) &#123;</span><br><span class="line">/******/ 		// "0" is the signal for "already loaded"</span><br><span class="line">/******/ 		if(installedChunks[chunkId] === 0)</span><br><span class="line">/******/ 			return callback.call(null, __webpack_require__);</span><br><span class="line"></span><br><span class="line">/******/ 		// an array means "currently loading".</span><br><span class="line">/******/ 		if(installedChunks[chunkId] !== undefined) &#123;</span><br><span class="line">/******/ 			installedChunks[chunkId].push(callback);</span><br><span class="line">/******/ 		&#125; else &#123;</span><br><span class="line">/******/ 			// start chunk loading</span><br><span class="line">/******/ 			installedChunks[chunkId] = [callback];</span><br><span class="line">/******/ 			var head = document.getElementsByTagName('head')[0];</span><br><span class="line">/******/ 			var script = document.createElement('script');</span><br><span class="line">/******/ 			script.type = 'text/javascript';</span><br><span class="line">/******/ 			script.charset = 'utf-8';</span><br><span class="line">/******/ 			script.async = true;</span><br><span class="line"></span><br><span class="line">/******/ 			script.src = __webpack_require__.p + "" + chunkId + ".bundle.js";</span><br><span class="line">/******/ 			head.appendChild(script);</span><br><span class="line">/******/ 		&#125;</span><br><span class="line">/******/ 	&#125;;</span><br><span class="line"></span><br><span class="line">/******/ 	// expose the modules object (__webpack_modules__)</span><br><span class="line">/******/ 	__webpack_require__.m = modules;</span><br><span class="line"></span><br><span class="line">/******/ 	// expose the module cache</span><br><span class="line">/******/ 	__webpack_require__.c = installedModules;</span><br><span class="line"></span><br><span class="line">/******/ 	// __webpack_public_path__</span><br><span class="line">/******/ 	__webpack_require__.p = "";</span><br><span class="line"></span><br><span class="line">/******/ 	// Load entry module and return exports</span><br><span class="line">/******/ 	return __webpack_require__(0);</span><br><span class="line">/******/ &#125;)</span><br><span class="line">/************************************************************************/</span><br><span class="line">/******/ ([</span><br><span class="line">/* 0 */</span><br><span class="line">/***/ function(module, exports, __webpack_require__) &#123;</span><br><span class="line"></span><br><span class="line">	__webpack_require__.e/* require.ensure */(1, function(require) &#123;</span><br><span class="line">	  var content = __webpack_require__(1);</span><br><span class="line">	  document.open();</span><br><span class="line">	  document.write('&lt;h1&gt;' + content + '&lt;/h1&gt;');</span><br><span class="line">	  document.close();</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">/***/ &#125;</span><br><span class="line">/******/ ]);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>//打包后  1.bundle.js<br>webpackJsonp([1],[<br>/<em> 0 </em>/,<br>/<em> 1 </em>/<br>/<em>*</em>/ function(module, exports) {</p>
<pre><code>module.exports = &apos;Hello World&apos;;
</code></pre><p>/<em>*</em>/ }<br>]);</p>
<ul>
<li>如何将您的bundle拆分成可以在之后异步下载的chunk。例如，这允许首先提供最低限度的引导bundle，并在稍后再异步地加载其他功能。webpack支持两种相似的技术实现此目的：使用import()(推荐，ECMAScript提案)和require.ensure()(遗留，webpack特定)。<font color="red">ES2015 loader规范定义了import()作为一种在运行时(runtime)动态载入ES2015模块的方法。</font> webpack把import()作为一个分离点(split-point)，并把引入的模块作为一个单独的chunk。import()将模块名字作为参数并返回一个Promoise对象。import()在内部依赖于Promise。如果你想在老版本浏览器使用import()，请记得使用polyfill(例如es6-promise或promise-polyfill)来shim Promise。</li>
<li>new webpack.optimize.CommonsChunkPlugin(/<em> chunkName= </em>/‘vendor’, /<em> filename= </em>/‘vendor.js’)</li>
<li>通过jsonp实现，并注意脚本的加载顺序：Demo10: Code splitting、Demo12: Common chunk(When multi scripts have common chunks, you can extract the common part into a separate file with CommonsChunkPlugin)、Demo13: Vendor chunk(You can also extract the vendor libraries from a script into a separate file with CommonsChunkPlugin)。</li>
<li>externals配置选项提供了「从输出的bundle中排除依赖」的方法。相反，所创建的bundle依赖于那些存在于用户环境(consumer’s environment)中的依赖。Exposing global variables：If you want to use some global variables, and don’t want to include them in the Webpack bundle, you can enable externals field in webpack.config.js。</li>
<li><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(&#123;</span><br><span class="line">   0: function(...) &#123;</span><br><span class="line">     var jQuery = require(1);</span><br><span class="line">     /* ... */</span><br><span class="line">   &#125;,</span><br><span class="line">   1: function(...) &#123;</span><br><span class="line">     // 很明显这里是把window.jQuery赋值给了module.exports</span><br><span class="line">     // 因此我们便可以使用require来引入了。</span><br><span class="line">     module.exports = jQuery;</span><br><span class="line">   &#125;,</span><br><span class="line">   /* ... */</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>library和libraryTarget的使用场景：有些时候我们想要开发一个库，如lodash、underscore这些，这些库既可以用commonjs和amd的方式使用，也可以通过script标签的方式引入使用，目前很多库都是支持这几种使用方式的。</p>
</li>
<li></li>
</ul>
</style></li></ul>
      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/23/jeecms/" rel="next" title="jeecms">
                <i class="fa fa-chevron-left"></i> jeecms
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/27/babel/" rel="prev" title="babel">
                babel <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="Johnthat" />
          <p class="site-author-name" itemprop="name">Johnthat</p>
          <p class="site-description motion-element" itemprop="description">记录生活点滴</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">35</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">友情链接</p>
            
              <span class="links-of-author-item">
                <a href="http://91fz.org/" target="_blank">程序员疯子</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://dmlcoding.com/" target="_blank">Time渐行渐远</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.hyperj.net/" target="_blank">HyperJ</a>
              </span>
            
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <p class="post-toc-empty">此文章未包含目录</p>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Johnthat</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.scheme !== 'Pisces' && (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always')) {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
